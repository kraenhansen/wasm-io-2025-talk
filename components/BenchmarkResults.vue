<script setup>
import { VueEcharts } from "vue3-echarts";
const props = defineProps(["xMaximum", "yMaximum", "filterSeries"]);

/*
const WASMER_JSC_UNOPTIMIZED = [
  315992.4207790544, 319306.2416455445, 319040.86696184246, 313606.9607926249,
  316764.5381607194, 317680.7090031424, 312518.9349990592, 314311.865509505,
  311793.5571758961, 302419.88659174944, 301634.77377233753, 289877.50488896127,
  271084.9322256, 249908.09408178856, 220160.12860254885, 185612.49717550338,
  145930.4101493437, 109194.27658828208, 77233.55915014891, 51954.34838807655,
  34944.74081508872, 22949.7743346842, 14312.502640325096, 9024.492372519207,
  5651.695752218417, 3506.0739582525566, 2199.2665446120914, 1354.8388310872515,
  844.5036784100678, 520.9378781582781, 322.41204134164644, 198.75171756827987,
  123.30701973004729, 75.9632717578153, 47.92039224860551, 29.12055088885051,
  17.999139785333533, 11.080175108436888, 6.914691432598593, 4.2428292814505975,
];
*/
const WASMER_JSC_UNOPTIMIZED_DEV = [
  361389.63861501415, 371614.62836800603, 371590.0862638349, 364819.9142984005,
  370005.41428877163, 366843.7046594651, 359019.3117583332, 361712.75909123605,
  361601.0656083228, 354635.3644885878, 343872.02547959547, 332647.7229127927,
  307730.6282591436, 281988.1421969637, 243895.69513794046, 196607.90169145542,
  155068.83857409563, 113920.81966560314, 80446.0949798971, 54356.48589606133,
  35872.85797935129, 22827.684224955603, 14489.690282863294, 9072.046301582439,
  5615.410146195557, 3564.9768278427096, 2195.6317749000427, 1359.9443551849522,
  851.4566642141184, 523.1149548956636, 323.67523234645824, 199.2268339225016,
  123.38667065020255, 75.70068584602011, 47.1150440175318, 28.9923726001869,
  17.99334546612772, 11.281211060064045, 6.886066300793562, 4.227515885201347,
];

const WASMER_JSC = [
  1791161.7008541175, 1818817.8471419117, 1765739.4104103935, 1783734.924938866,
  1745893.7102875654, 1712592.6437461183, 1660307.1697086599,
  1614116.9320765403, 1565415.283036528, 1459907.0276693627, 1313295.944735352,
  1114563.582002517, 889893.9635072323, 671563.9160205665, 480765.03848230233,
  323321.58227165835, 231350.39270786676, 150808.56008369144, 96718.94351552674,
  61067.98222983544, 38407.29426446614, 23589.897759209533, 14964.348423713704,
  9020.333623300907, 5716.872799940036, 3537.804684993016, 2169.595641823302,
  1363.8574769808008, 838.220804229159, 521.7645970386121, 320.7097176098138,
  199.32144340974554, 121.87854303201412, 74.82364374057063, 47.246522287323806,
  28.69284075782077, 18.09956330485893, 10.963183350612727, 6.800978709244563,
  4.21104582583355,
];

const SAFARI = [
  34714599, 23131307, 22193536, 21910673, 20980352.99999998, 18686723, 15256080,
  12080542.999999978, 8819715, 6431809, 4227886, 2712927, 1791494, 1140039,
  700230, 436315, 269181, 169789, 103647, 65662, 39553, 24465, 15123, 9349,
  5711, 3537, 2187, 1340, 839, 511, 320.6793206793184, 198.4047856430708,
  121.63509471585246, 74.85029940119706, 46.53465346534654, 28.627838104639686,
  17.910447761194032, 11.121408711770233, 6.944444444444445, 4.299226139294927,
];

const POLYGEN_UNOPTIMIZED = [
  4712759.217686986, 4762937.604536767, 4630721.80568718, 4471154.9876292525,
  4234636.293016419, 3982056, 3634155.393051659, 3127913, 2581324.568887267,
  1997278.2510749411, 1457013.635772992, 1020934.214370878, 678155.2933564878,
  442514.33622385346, 281647.9529613516, 180246.14382841025, 113430.72107503426,
  70088.85687886788, 42490.704306292544, 27177.596875426294, 16887.998598808404,
  10396.819355343023, 6459.74161019698, 3983.068459719638, 2467.2984632961147,
  1520.4554230536446, 943.9910717273192, 569.181422651344, 353.48060443180646,
  217.7566930543129, 137.49512943321275, 84.93101130673892, 51.928539839252736,
  32.516864427040595, 20.096899746983375, 12.47304503006269, 7.697907179639851,
  4.707191133707494, 2.943451634562248, 1.8054354438947022,
];

const POLYGEN_UNOPTIMIZED_DEV = [
  5209656.567446018, 5269227.778894403, 5379547.7739445465, 5242588.344723955,
  5247300.123636785, 5091558.786046211, 4973021.791027286, 4727817.2151873745,
  4278943, 3786359.5265136785, 3170763.473656638, 2449485.6938364804,
  1869443.5325615632, 1312866.3973741455, 877222.8175199252, 578185.0118563863,
  377091.6074494765, 241623.84898163792, 151528.32448518433, 95385.37599198059,
  59516.73461703062, 36805.62123188175, 22968.08988969002, 14216.9964460085,
  8715.903035333524, 5405.485127484901, 3348.81344433037, 2060.6241937569916,
  1259.3426760236844, 742.739948208925, 486.1262692131601, 300.4869437849968,
  187.48424658553603, 115.60737331524476, 71.62216913596123, 44.064062780666106,
  27.374002175462305, 16.68733907348244, 10.43600440529195, 6.45122345136275,
];

const POLYGEN = [
  8604114.63895698, 8690090.466562137, 8548511.290732877, 8416279,
  8298239.626963052, 7942856.340983866, 7529273.374401147, 6824211.426475876,
  6072814.750966039, 5143896.357366159, 4111788.65884627, 3025966.494626634,
  2113952.6469440865, 1444178.3993355709, 938606.8653168414, 597664.0789886059,
  383473.7764603177, 247014.63960502457, 155554.17041934465, 96726.00449081378,
  60107.05584019019, 37113.53919810675, 22836.950509914957, 14019.981311389085,
  8517.09967440169, 5432.12723672508, 3347.878920769365, 2081.5640851241437,
  1266.097537113428, 798.6673550687022, 487.1184782336729, 296.5695539168675,
  187.15328726243712, 114.77642985906124, 71.32052642358751, 44.479359796646804,
  27.42486627483392, 16.983325923128458, 10.44688323701672, 6.446440154762492,
];

const option = {
  title: {
    text: "Benchmark Results",
    top: "top",
    left: "center",
    textStyle: {
      fontFamily: "Lexend Deca",
      fontWeight: "lighter",
      color: "#fff",
    },
  },
  textStyle: {
    fontFamily: "Lexend Deca",
    fontWeight: "lighter",
    color: "#fff",
  },
  xAxis: {
    name: "i",
    type: "category",
    min: 0,
    max: props.xMaximum || 39,
    axisTick: {
      customValues: [],
    },
  },
  yAxis: {
    name: "fib(i) [ops / sec]",
    type: "log",
    max: 100_000_000,
  },
  legend: {
    bottom: "bottom",
    textStyle: {
      fontFamily: "Lexend Deca",
      fontWeight: "lighter",
      color: "#fff",
    },
  },
  series: [
    {
      type: "line",
      name: "Wasmer using JSC (unoptimized)",
      data: Object.entries(WASMER_JSC_UNOPTIMIZED_DEV),
    },
    {
      type: "line",
      name: "Wasmer using JSC",
      data: Object.entries(WASMER_JSC),
    },
    {
      type: "line",
      name: "Safari",
      data: Object.entries(SAFARI),
    },
    {
      type: "line",
      name: "Polygen",
      data: Object.entries(POLYGEN),
    },
  ].filter(
    ({ name }) => !props.filterSeries || props.filterSeries.includes(name),
  ),
};
</script>

<template>
  <VueEcharts :option="option" style="height: 100%" ref="chart" />
</template>
